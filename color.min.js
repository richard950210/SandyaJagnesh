setTimeout((function(){"use strict";class t{constructor(t,s,i){this.set(t,s,i)}toString(){return`rgb(${Math.round(this.r)}, ${Math.round(this.g)}, ${Math.round(this.b)})`}set(t,s,i){this.r=this.clamp(t),this.g=this.clamp(s),this.b=this.clamp(i)}hueRotate(t=0){t=t/180*Math.PI;const s=Math.sin(t),i=Math.cos(t);this.multiply([.213+.787*i-.213*s,.715-.715*i-.715*s,.072-.072*i+.928*s,.213-.213*i+.143*s,.715+.285*i+.14*s,.072-.072*i-.283*s,.213-.213*i-.787*s,.715-.715*i+.715*s,.072+.928*i+.072*s])}grayscale(t=1){this.multiply([.2126+.7874*(1-t),.7152-.7152*(1-t),.0722-.0722*(1-t),.2126-.2126*(1-t),.7152+.2848*(1-t),.0722-.0722*(1-t),.2126-.2126*(1-t),.7152-.7152*(1-t),.0722+.9278*(1-t)])}sepia(t=1){this.multiply([.393+.607*(1-t),.769-.769*(1-t),.189-.189*(1-t),.349-.349*(1-t),.686+.314*(1-t),.168-.168*(1-t),.272-.272*(1-t),.534-.534*(1-t),.131+.869*(1-t)])}saturate(t=1){this.multiply([.213+.787*t,.715-.715*t,.072-.072*t,.213-.213*t,.715+.285*t,.072-.072*t,.213-.213*t,.715-.715*t,.072+.928*t])}multiply(t){const s=this.clamp(this.r*t[0]+this.g*t[1]+this.b*t[2]),i=this.clamp(this.r*t[3]+this.g*t[4]+this.b*t[5]),r=this.clamp(this.r*t[6]+this.g*t[7]+this.b*t[8]);this.r=s,this.g=i,this.b=r}brightness(t=1){this.linear(t)}contrast(t=1){this.linear(t,-.5*t+.5)}linear(t=1,s=0){this.r=this.clamp(this.r*t+255*s),this.g=this.clamp(this.g*t+255*s),this.b=this.clamp(this.b*t+255*s)}invert(t=1){this.r=this.clamp(255*(t+this.r/255*(1-2*t))),this.g=this.clamp(255*(t+this.g/255*(1-2*t))),this.b=this.clamp(255*(t+this.b/255*(1-2*t)))}hsl(){const t=this.r/255,s=this.g/255,i=this.b/255,r=Math.max(t,s,i),e=Math.min(t,s,i);let a,h,l=(r+e)/2;if(r===e)a=h=0;else{const o=r-e;switch(h=l>.5?o/(2-r-e):o/(r+e),r){case t:a=(s-i)/o+(s<i?6:0);break;case s:a=(i-t)/o+2;break;case i:a=(t-s)/o+4}a/=6}return{h:100*a,s:100*h,l:100*l}}clamp(t){return t>255?t=255:t<0&&(t=0),t}}class s{constructor(s,i){this.target=s,this.targetHSL=s.hsl(),this.reusedColor=new t(0,0,0)}solve(){const t=this.solveNarrow(this.solveWide());return{values:t.values,loss:t.loss,filter:this.css(t.values)}}solveWide(){const t=[60,180,18e3,600,1.2,1.2];let s={loss:1/0};for(let i=0;s.loss>25&&i<3;i++){const i=[50,20,3750,50,100,100],r=this.spsa(5,t,15,i,1e3);r.loss<s.loss&&(s=r)}return s}solveNarrow(t){const s=t.loss,i=s+1,r=[.25*i,.25*i,i,.25*i,.2*i,.2*i];return this.spsa(s,r,2,t.values,500)}spsa(t,s,i,r,e){let a=null,h=1/0;const l=new Array(6),o=new Array(6),n=new Array(6);for(let u=0;u<e;u++){const e=i/Math.pow(u+1,.16666666666666666);for(let t=0;t<6;t++)l[t]=Math.random()>.5?1:-1,o[t]=r[t]+e*l[t],n[t]=r[t]-e*l[t];const p=this.loss(o)-this.loss(n);for(let i=0;i<6;i++){const a=p/(2*e)*l[i],h=s[i]/Math.pow(t+u+1,1);r[i]=c(r[i]-h*a,i)}const g=this.loss(r);g<h&&(a=r.slice(0),h=g)}return{values:a,loss:h};function c(t,s){let i=100;return 2===s?i=7500:4!==s&&5!==s||(i=200),3===s?t>i?t%=i:t<0&&(t=i+t%i):t<0?t=0:t>i&&(t=i),t}}loss(t){const s=this.reusedColor;s.set(0,0,0),s.invert(t[0]/100),s.sepia(t[1]/100),s.saturate(t[2]/100),s.hueRotate(3.6*t[3]),s.brightness(t[4]/100),s.contrast(t[5]/100);const i=s.hsl();return Math.abs(s.r-this.target.r)+Math.abs(s.g-this.target.g)+Math.abs(s.b-this.target.b)+Math.abs(i.h-this.targetHSL.h)+Math.abs(i.s-this.targetHSL.s)+Math.abs(i.l-this.targetHSL.l)}css(t){function s(s,i=1){return Math.round(t[s]*i)}return`filter: invert(${s(0)}%) sepia(${s(1)}%) saturate(${s(2)}%) hue-rotate(${s(3,3.6)}deg) brightness(${s(4)}%) contrast(${s(5)}%);`}}$(document).ready((()=>{const i=function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,((t,s,i,r)=>s+s+i+i+r+r));const s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return s?[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]:null}($("input.primary_color").val());if(3!==i.length)return void alert("Invalid format!");const r=new t(i[0],i[1],i[2]),e=new s(r).solve();$(".img-color").attr("style",e.filter)}))}),1);